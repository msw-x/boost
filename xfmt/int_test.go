package xfmt

import (
	"testing"
)

func TestInt(t *testing.T) {
	t0 := func(f string, v int, e string) {
		r := Int(f, v)
		if r != e {
			t.Errorf("Int(%q, %d) = %q; expected: %q", f, v, r, e)
		}
	}
	t1 := func(f string, v int, e string) {
		t0(f, v, e)
		t0(f, -v, "-"+e)
	}

	t1("", 1, "1")
	t1("", 123, "123")
	t1("", 12345, "12345")
	t1("", 1234567, "1234567")
	t1("", 123456789, "123456789")
	t1("", 1234567890, "1234567890")
	t1("", 12345678901234, "12345678901234")
	t1("", 12345678901234000, "12345678901234000")
	t1("", 1234567890123400000, "1234567890123400000")

	t1(" ", 1, "1")
	t1(" ", 123, "123")
	t1(" ", 12345, "12 345")
	t1(" ", 1234567, "1 234 567")
	t1(" ", 123456789, "123 456 789")
	t1(" ", 1234567890, "1 234 567 890")
	t1(" ", 12345678901234, "12 345 678 901 234")
	t1(" ", 12345678901234000, "12 345 678 901 234 000")
	t1(" ", 1234567890123400000, "1 234 567 890 123 400 000")

	t1(".", 1, "1")
	t1(".", 123, "123")
	t1(".", 12345, "12.3K")
	t1(".", 1234567, "1.2M")
	t1(".", 123456789, "123.5M")
	t1(".", 1234567890, "1.2G")
	t1(".", 12345678901234, "12.3T")
	t1(".", 12345678901234000, "12.3P")
	t1(".", 1234567890123400000, "1.2E")

	t1(" .", 1, "1")
	t1(" .", 123, "123")
	t1(" .", 12345, "12.3 K")
	t1(" .", 1234567, "1.2 M")
	t1(" .", 123456789, "123.5 M")
	t1(" .", 1234567890, "1.2 G")
	t1(" .", 12345678901234, "12.3 T")
	t1(" .", 12345678901234000, "12.3 P")
	t1(" .", 1234567890123400000, "1.2 E")

	t1(".0", 1, "1")
	t1(".0", 123, "123")
	t1(".0", 12345, "12K")
	t1(".0", 1234567, "1M")
	t1(".0", 123456789, "123M")
	t1(".0", 1234567890, "1G")
	t1(".0", 12345678901234, "12T")
	t1(".0", 12345678901234000, "12P")
	t1(".0", 1234567890123400000, "1E")

	t1(" .0", 1, "1")
	t1(" .0", 123, "123")
	t1(" .0", 12345, "12 K")
	t1(" .0", 1234567, "1 M")
	t1(" .0", 123456789, "123 M")
	t1(" .0", 1234567890, "1 G")
	t1(" .0", 12345678901234, "12 T")
	t1(" .0", 12345678901234000, "12 P")
	t1(" .0", 1234567890123400000, "1 E")

	t1(".2", 1, "1")
	t1(".2", 123, "123")
	t1(".2", 12345, "12.35K")
	t1(".2", 1234567, "1.23M")
	t1(".2", 123456789, "123.46M")
	t1(".2", 1234567890, "1.23G")
	t1(".2", 12345678901234, "12.35T")
	t1(".2", 12345678901234000, "12.35P")
	t1(".2", 1234567890123400000, "1.23E")

	t1(" .2", 1, "1")
	t1(" .2", 123, "123")
	t1(" .2", 12345, "12.35 K")
	t1(" .2", 1234567, "1.23 M")
	t1(" .2", 123456789, "123.46 M")
	t1(" .2", 1234567890, "1.23 G")
	t1(" .2", 12345678901234, "12.35 T")
	t1(" .2", 12345678901234000, "12.35 P")
	t1(" .2", 1234567890123400000, "1.23 E")

	t1(".02", 1, "1.00")
	t1(".02", 123, "123.00")
	t1(".02", 12345, "12.35K")
	t1(".02", 1200000, "1.20M")
	t1(".02", 123456789, "123.46M")
	t1(".02", 1234567890, "1.23G")
	t1(".02", 12345678901234, "12.35T")
	t1(".02", 7000000000000000, "7.00P")
	t1(".02", 1600000000000000000, "1.60E")

	t1(" .02", 1, "1.00")
	t1(" .02", 123, "123.00")
	t1(" .02", 12345, "12.35 K")
	t1(" .02", 1200000, "1.20 M")
	t1(" .02", 123456789, "123.46 M")
	t1(" .02", 1234567890, "1.23 G")
	t1(" .02", 12345678901234, "12.35 T")
	t1(" .02", 7000000000000000, "7.00 P")
	t1(" .02", 1600000000000000000, "1.60 E")

	t1(".K", 1, "0K")
	t1(".K", 123, "0.1K")
	t1(".K", 12345, "12.3K")
	t1(".K", 1234567, "1234.6K")
	t1(".K", 123456789, "123456.8K")
	t1(".K", 1234567890, "1234567.9K")
	t1(".K", 12345678901234, "12345678901.2K")
	t1(".K", 12345678901234000, "12345678901234K")
	t1(".K", 1234567890123400000, "1234567890123400K")

	t1(" .K", 1, "0 K")
	t1(" .K", 123, "0.1 K")
	t1(" .K", 12345, "12.3 K")
	t1(" .K", 1234567, "1 234.6 K")
	t1(" .K", 123456789, "123 456.8 K")
	t1(" .K", 1234567890, "1 234 567.9 K")
	t1(" .K", 12345678901234, "12 345 678 901.2 K")
	t1(" .K", 12345678901234000, "12 345 678 901 234 K")
	t1(" .K", 1234567890123400000, "1 234 567 890 123 400 K")

	t1(" .M", 1, "0 M")
	t1(" .M", 123, "0 M")
	t1(" .M", 12345, "0 M")
	t1(" .M", 1234567, "1.2 M")
	t1(" .M", 123456789, "123.5 M")
	t1(" .M", 1234567890, "1 234.6 M")
	t1(" .M", 12345678901234, "12 345 678.9 M")
	t1(" .M", 12345678901234000, "12 345 678 901.2 M")
	t1(" .M", 1234567890123400000, "1 234 567 890 123.4 M")

	t1(".0K", 1, "0K")
	t1(".0K", 123, "0K")
	t1(".0K", 12345, "12K")
	t1(".0K", 1234567, "1234K")
	t1(".0K", 123456789, "123456K")
	t1(".0K", 1234567890, "1234567K")
	t1(".0K", 12345678901234, "12345678901K")
	t1(".0K", 12345678901234000, "12345678901234K")
	t1(".0K", 1234567890123400000, "1234567890123400K")

	t1(".4K", 1, "0.001K")
	t1(".4K", 123, "0.123K")
	t1(".4K", 12345, "12.345K")
	t1(".4K", 1234567, "1234.567K")
	t1(".4K", 123456789, "123456.789K")
	t1(".4K", 1234567890, "1234567.89K")
	t1(".4K", 12345678901234, "12345678901.234K")
	t1(".4K", 12345678901234000, "12345678901234K")
	t1(".4K", 1234567890123400000, "1234567890123400K")

	t1(".04K", 1, "0.0010K")
	t1(".04K", 123, "0.1230K")
	t1(".04K", 12345, "12.3450K")
	t1(".04K", 1234567, "1234.5670K")
	t1(".04K", 123456789, "123456.7890K")
	t1(".04K", 1234567890, "1234567.8900K")
	t1(".04K", 12345678901234, "12345678901.2340K")
	t1(".04K", 12345678901234000, "12345678901234.0000K")
	t1(".04K", 1234567890123400000, "1234567890123400.0000K")

	t1(" .04K", 1, "0.0010 K")
	t1(" .04K", 123, "0.1230 K")
	t1(" .04K", 12345, "12.3450 K")
	t1(" .04K", 1234567, "1 234.5670 K")
	t1(" .04K", 123456789, "123 456.7890 K")
	t1(" .04K", 1234567890, "1 234 567.8900 K")
	t1(" .04K", 12345678901234, "12 345 678 901.2340 K")
	t1(" .04K", 12345678901234000, "12 345 678 901 234.0000 K")
	t1(" .04K", 1234567890123400000, "1 234 567 890 123 400.0000 K")

	t1(" .:K", 1, "1")
	t1(" .:K", 123, "123")
	t1(" .:K", 12345, "12.3 K")
	t1(" .:K", 1234567, "1 234.6 K")
	t1(" .:K", 123456789, "123 456.8 K")
	t1(" .:K", 1234567890, "1 234 567.9 K")
	t1(" .:K", 12345678901234, "12 345 678 901.2 K")
	t1(" .:K", 12345678901234000, "12 345 678 901 234 K")
	t1(" .:K", 1234567890123400000, "1 234 567 890 123 400 K")

	t1(" .K:G", 1, "0 K")
	t1(" .K:G", 123, "0.1 K")
	t1(" .K:G", 12345, "12.3 K")
	t1(" .K:G", 1234567, "1.2 M")
	t1(" .K:G", 123456789, "123.5 M")
	t1(" .K:G", 1234567890, "1.2 G")
	t1(" .K:G", 12345678901234, "12 345.7 G")
	t1(" .K:G", 12345678901234000, "12 345 678.9 G")
	t1(" .K:G", 1234567890123400000, "1 234 567 890.1 G")

	t1(".K", 900, "0.9K")
	t1(".K", 949, "0.9K")
	t1(".K", 990, "1K")
	t1(".K", 999, "1K")
	t1(".K", 1000, "1K")
	t1(".K", 1010, "1K")
	t1(".K", 1060, "1.1K")
	t1(".K", 1100, "1.1K")
	t1(".Ki", 900, "0.9K")
	t1(".Ki", 999, "1K")
	t1(".Ki", 1000, "1K")
	t1(".Ki", 1024, "1K")
	t1(".Ki", 1060, "1K")
}
